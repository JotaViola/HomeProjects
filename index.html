<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Controle Financeiro</title>

<style>
:root{
  --bg:#0a0a0f;
  --panel:#12121a;
  --panel-2:#181824;
  --text:#e5e7eb;
  --muted:#9ca3af;
  --gold:#d4af37;

  --nubank:#7c3aed;
  --inter:#f97316;
  --caixa:#2563eb;
  --poupanca:#9ca3af;
}

*{box-sizing:border-box}

body{
  margin:0;
  font-family:Inter, Arial, sans-serif;
  background:
    radial-gradient(1200px 600px at top, #141420 0%, transparent 60%),
    var(--bg);
  color:var(--text);
}

/* ===== HEADER ===== */
header{
  display:flex;
  justify-content:space-between;
  align-items:flex-start;
  padding:24px;
  gap:20px;
}

.topo{
  display:flex;
  gap:16px;
  flex-wrap:wrap;
}

.caixa-topo{
  background:linear-gradient(180deg,#1b1b28,#12121a);
  border:1px solid rgba(212,175,55,.4);
  border-radius:14px;
  padding:12px 16px;
  min-width:130px;
  text-align:center;
  box-shadow:0 10px 25px rgba(0,0,0,.35);
}

.caixa-topo div,
.caixa-topo label{
  font-size:12px;
  letter-spacing:.08em;
  color:var(--muted);
}

.caixa-topo input{
  margin-top:6px;
  width:100%;
  background:transparent;
  border:none;
  color:#fff;
  font-size:20px;
  font-weight:600;
  text-align:center;
}

#sobra{
  margin-top:6px;
  font-size:20px;
  font-weight:700;
  color:var(--gold);
}

/* ===== RESUMO ===== */
.resumo{
  background:linear-gradient(180deg,#1a1a26,#12121a);
  border:1px solid #2a2a3a;
  border-radius:14px;
  padding:14px 18px;
  font-size:14px;
  line-height:1.6;
  box-shadow:0 10px 25px rgba(0,0,0,.35);
}

.resumo span{
  float:right;
  font-weight:600;
}

/* ===== MAIN ===== */
main{
  padding:24px;
}

select{
  background:var(--panel-2);
  color:#fff;
  border:1px solid #2a2a3a;
  border-radius:10px;
  padding:8px 12px;
  margin-bottom:24px;
}

/* ===== BLOCOS ===== */
.blocos{
  display:flex;
  flex-direction:column;
  gap:28px;
}


.bloco{
  background:linear-gradient(180deg,#1b1b28,#12121a);
  border-radius:18px;
  padding:16px;
  box-shadow:
    0 10px 30px rgba(0,0,0,.45),
    inset 0 1px 0 rgba(255,255,255,.04);
  border:1px solid #2a2a3a;
}

.bloco h2{
  margin:0 0 14px;
  font-size:18px;
  font-weight:600;
  letter-spacing:.04em;
}

/* ===== CORES DOS BLOCOS ===== */
.nubank{border-left:4px solid var(--nubank)}
.inter{border-left:4px solid var(--inter)}
.caixa{border-left:4px solid var(--caixa)}
.poupanca{border-left:4px solid var(--poupanca)}

/* ===== LINHAS ===== */
.linha{
  display:grid;
  grid-template-columns:2fr 1fr 1fr 1fr 50px 26px;
  gap:8px;
  margin-bottom:8px;
}

.header{
  font-size:11px;
  color:var(--muted);
  text-transform:uppercase;
  letter-spacing:.08em;
}

input{
  background:#0e0e16;
  border:1px solid #2a2a3a;
  border-radius:8px;
  color:#fff;
  padding:6px 8px;
}

input[type="checkbox"]{
  accent-color:var(--gold);
  transform:scale(1.1);
}

button{
  background:#1f1f2f;
  border:1px solid #2a2a3a;
  color:#fff;
  border-radius:8px;
  cursor:pointer;
}

button:hover{
  background:#2a2a3f;
}

/* ===== GR√ÅFICO ===== */
canvas{
  width:100%;
  background:linear-gradient(180deg,#0e0e16,#0a0a0f);
  border-radius:16px;
  margin-top:10px;
  box-shadow:inset 0 0 0 1px #1f1f2f;
}

.link-meta{
  align-self:flex-start;
  text-decoration:none;
  color:var(--gold);
  border:1px solid rgba(212,175,55,.4);
  padding:8px 14px;
  border-radius:12px;
  font-weight:600;
  background:linear-gradient(180deg,#1b1b28,#12121a);
  box-shadow:0 8px 20px rgba(0,0,0,.35);
  transition:.2s;
}

.link-meta:hover{
  transform:translateY(-1px);
  box-shadow:0 12px 30px rgba(0,0,0,.45);
}
</style>
</head>

<body>

<header>
      <a href="meta.html" class="link-meta">üéØ Metas</a>
  <div style="display:flex;gap:12px">
    <div class="caixa-topo">SALDO<input id="saldo" type="number" oninput="salvar();calcular()"></div>
    <div class="caixa-topo">TAIN√Å<input id="taina" type="number" oninput="salvar();calcular()"></div>
    <div class="caixa-topo">JO√ÉO<input id="joao" type="number" oninput="salvar();calcular()"></div>
    <div class="caixa-topo">SOBRA<div id="sobra">0</div></div>
  </div>

  <div class="resumo">
    Receitas: <span id="rReceitas">0</span><br>
    Cart√µes: <span id="rCartoes">0</span><br>
    Fixos: <span id="rFixos">0</span><br>
    Poupan√ßa: <span id="rPoupanca">0</span><br>
    Despesas: <span id="rDespesas">0</span><br>
    Sobra: <span id="rSobra">0</span>
  </div>
</header>

<main>
<select id="mes" onchange="trocarMes()"></select>

<div class="blocos">

<!-- FIXOS -->
<div class="bloco">
  <h2>üìå Fixos</h2>
  <div class="linha header">
    <div>Descri√ß√£o</div><div>Categoria</div><div>Valor</div><div>Pago</div>
  </div>
  <div id="fixos"></div>
  <button onclick="criarLinhaFixo()">+</button>
</div>

<!-- NUBANK -->
<div class="bloco nubank">
<h2>Nubank</h2>
<div class="linha header">
<div>Descri√ß√£o</div><div>Parcela</div><div>Categoria</div><div>Valor</div><div>Pago</div>
</div>
<div id="nubank"></div>
<button onclick="criarLinha('nubank')">+</button>
</div>

<!-- INTER -->
<div class="bloco inter">
<h2>Inter</h2>
<div class="linha header">
<div>Descri√ß√£o</div><div>Parcela</div><div>Categoria</div><div>Valor</div><div>Pago</div>
</div>
<div id="inter"></div>
<button onclick="criarLinha('inter')">+</button>
</div>

<!-- CAIXA -->
<div class="bloco caixa">
<h2>Caixa</h2>
<div class="linha header">
<div>Descri√ß√£o</div><div>Parcela</div><div>Categoria</div><div>Valor</div><div>Pago</div>
</div>
<div id="caixa"></div>
<button onclick="criarLinha('caixa')">+</button>
</div>

<!-- POUPAN√áA -->
<div class="bloco poupanca">
<h2>Poupan√ßa</h2>
<div id="poupanca"></div>
<button onclick="criarLinhaPoupanca()">+</button>
</div>

<!-- GR√ÅFICO -->
<div class="bloco">
<h2>üìà Gr√°fico Mensal</h2>
<canvas id="graficoMensal" height="140"></canvas>
</div>

</div>
</main>

<script>
const meses=["2026-01","2026-02","2026-03","2026-04","2026-05","2026-06",
"2026-07","2026-08","2026-09","2026-10","2026-11","2026-12"];
let mesAtual;

function initMes(){
  const sel=mes.value="";
  meses.forEach(m=>{
    const o=document.createElement("option");
    o.value=o.text=m;
    mes.appendChild(o);
  });
  mesAtual=meses[0];
}

function trocarMes(){mesAtual=mes.value;carregar();}

function criarLinha(b,d={}){
  const l=document.createElement("div");
  l.className="linha";
  l.innerHTML=`
  <input value="${d.nome||""}">
  <input>
  <input>
  <input type="number" value="${d.valor||0}" oninput="salvar();calcular()">
  <input type="checkbox" ${d.pago?"checked":""} onchange="salvar();calcular()">
  <button onclick="this.parentElement.remove();salvar();calcular()">‚úï</button>`;
  document.getElementById(b).appendChild(l);
}

function criarLinhaPoupanca(v=0){
  const l=document.createElement("div");
  l.className="linha";
  l.innerHTML=`
  <input value="Dep√≥sito">
  <input type="number" value="${v}" oninput="salvar();calcular()">
  <button onclick="this.parentElement.remove();salvar();calcular()">‚úï</button>`;
  poupanca.appendChild(l);
}

/* ===== FIXOS ===== */
function criarLinhaFixo(d={}){
  const l=document.createElement("div");
  l.className="linha";
  l.innerHTML=`
    <input value="${d.nome||""}" oninput="salvarFixos();calcular()">
    <input value="${d.cat||""}" oninput="salvarFixos();calcular()">
    <input type="number" value="${d.valor||0}" oninput="salvarFixos();calcular()">
    <input type="checkbox" ${d.pago?"checked":""} onchange="salvarFixos();calcular()">
    <button onclick="this.parentElement.remove();salvarFixos();calcular()">‚úï</button>`;
  fixos.appendChild(l);
}

function salvarFixos(){
  const f=[];
  document.querySelectorAll("#fixos .linha").forEach(l=>{
    const i=l.querySelectorAll("input");
    f.push({nome:i[0].value,cat:i[1].value,valor:+i[2].value||0,pago:i[3].checked});
  });
  localStorage.setItem("fin_fixos",JSON.stringify(f));
}

function carregarFixos(){
  fixos.innerHTML="";
  (JSON.parse(localStorage.getItem("fin_fixos"))||[]).forEach(criarLinhaFixo);
}

function totalFixos(){
  let t=0;
  document.querySelectorAll("#fixos .linha").forEach(l=>{
    const i=l.querySelectorAll("input");
    if(!i[3].checked) t+=+i[2].value||0;
  });
  return t;
}

function coletar(b){
  let t=0;
  document.querySelectorAll("#"+b+" .linha").forEach(l=>{
    const i=l.querySelectorAll("input");
    if(!i[4]?.checked) t+=+i[3].value||0;
  });
  return t;
}

function poupancaMes(){
  let t=0;
  document.querySelectorAll("#poupanca input[type=number]").forEach(i=>t+=+i.value||0);
  return t;
}

function salvar(){
  const d={saldo:saldo.value,taina:taina.value,joao:joao.value,nubank:[],inter:[],caixa:[],poupanca:poupancaMes()};
  ["nubank","inter","caixa"].forEach(b=>{
    document.querySelectorAll("#"+b+" .linha").forEach(l=>{
      const i=l.querySelectorAll("input");
      d[b].push({nome:i[0].value,valor:+i[3].value||0,pago:i[4].checked});
    });
  });
  localStorage.setItem("fin_"+mesAtual,JSON.stringify(d));
}

function carregar(){
  const d=JSON.parse(localStorage.getItem("fin_"+mesAtual))||{};
  saldo.value=d.saldo||0;
  taina.value=d.taina||0;
  joao.value=d.joao||0;
  ["nubank","inter","caixa"].forEach(b=>{
    document.getElementById(b).innerHTML="";
    (d[b]||[]).forEach(x=>criarLinha(b,x));
  });
  poupanca.innerHTML="";
  if(d.poupanca) criarLinhaPoupanca(d.poupanca);
  calcular();
}

function calcular(){
  const receitas=(+taina.value||0)+(+joao.value||0);
  const cartoes=coletar("nubank")+coletar("inter")+coletar("caixa");
  const fixosV=totalFixos();
  const poup=poupancaMes();
  const despesas=cartoes+fixosV+poup;
  const sobraCalc=receitas-despesas;

  sobra.textContent=sobraCalc.toFixed(2);
  rReceitas.textContent=receitas.toFixed(2);
  rCartoes.textContent=cartoes.toFixed(2);
  rFixos.textContent=fixosV.toFixed(2);
  rPoupanca.textContent=poup.toFixed(2);
  rDespesas.textContent=despesas.toFixed(2);
  rSobra.textContent=sobraCalc.toFixed(2);

  desenharGrafico(receitas,despesas,sobraCalc,poup);
}

function desenharGrafico(r,d,s,p){
  const c=graficoMensal,ctx=c.getContext("2d");
  c.width=c.offsetWidth;
  ctx.clearRect(0,0,c.width,c.height);
  const dados=[r,d,s,p],cores=["#16a34a","#dc2626","#d4af37","#9ca3af"];
  const max=Math.max(...dados,1);
  dados.forEach((v,i)=>{
    const h=(v/max)*(c.height-40);
    ctx.fillStyle=cores[i];
    ctx.fillRect(40+i*70,c.height-20-h,40,h);
    ctx.fillStyle="#fff";
    ctx.fillText(v.toFixed(0),45+i*70,c.height-25-h);
  });
}

initMes();
carregarFixos();
carregar();
</script>

</body>
</html>
